/*!
 * =====================================================
 * huixing v1.0.0 (17-09-15)
 * author:tanghao
 * =====================================================
 */
var huixing={init:function(a){function b(a){a.is(":checked")?a.parents("li").addClass("checked"):a.parents("li").removeClass("checked")}var c=this,d={basePath:"../assets",inputUp:!0,deceleration:6e-4,swipeBack:!0,tabNav:0,showTabNav:!0,slider:0,scroll:!0,htmlMode:!0},e=$.extend({},d,a);e.basePath;if(e.inputUp){var f=navigator.userAgent,g=(f.indexOf("Android")>-1||f.indexOf("Adr")>-1,!!f.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/));g?$("input[type='text']").on("click",function(){var a=($(this),this);$("body").addClass("inputUpFix"),setTimeout(function(){a.scrollIntoView(!0)},200),$(".mui-bar-tab").hide()}).blur(function(){var a=this;$("body").removeClass("inputUpFix"),setTimeout(function(){a.scrollIntoView(!1)},40),$(".mui-bar-tab").show()}):$("input[type='text'].up-input").on("click",function(){var a=mui(".mui-scroll-wrapper").scroll().y,b=$(this).offset().top,c=-a+b-100;mui(".mui-scroll-wrapper").scroll().scrollTo(0,-c)})}e.scroll&&mui(".mui-scroll-wrapper").scroll({deceleration:e.deceleration,bounce:!1}),mui.init({swipeBack:e.swipeBack}),mui(".hrefmode").on("tap","a",function(){document.location.href=this.href}),$(".mui-indexed-list-inner ul").css("padding-bottom",$(".indexedHotCity").height()+50+"px"),e.htmlMode&&(e.showTabNav?$("#navload").load("nav.html",function(){c.tabNav(e.tabNav)}):$("#navload").remove()),e.slider>0&&mui(".mui-slider").slider({interval:e.slider}),$(".list-checkbox-group").length>0&&($(".list-checkbox-group li input").each(function(){b($(this))}),$(".list-checkbox-group li input").click(function(){b($(this))}))},listRadio:function(a,b){if(""!=a&&"undefined"!=$.type(a)){var c=$("#"+a);c.find("li").on("click",function(){$(this).addClass("active").siblings("li").removeClass("active");var a=$(this).val();"function"==$.type(b)&&b(a)})}else $(".list-select-radio.list-select-label").find("li").on("click",function(){$(this).addClass("active").siblings("li").removeClass("active")})},listCheckbox:function(){$(".list-select-checkbox.list-select-label,.slide-sel-checkbox").on("click","li",function(){function a(a){a.hasClass("active")?a.removeClass("active").siblings("li").removeClass("active"):a.addClass("active").siblings("li").removeClass("active").addClass("active")}function b(a){a.hasClass("active")?(a.removeClass("active"),a.parents("ul").find("li[value='all']").removeClass("active")):a.addClass("active")}"all"==$(this).attr("value")?a($(this)):b($(this))})},setHome:function(){function a(){var a=$(window).height();$(".new-home .mui-content").css("height",a),a<=480&&$(".new-home .mui-content").css("background-position-y","50%")}a(),$(window).resize(function(){a()}),$(".new-home .pic-nav-wrap").slideDown()},tabNav:function(a){$(".mui-bar-tab").find("a").removeClass("mui-active"),$(".mui-bar-tab a").eq(a).addClass("mui-active"),mui(".mui-bar-tab").on("tap","a",function(){document.location.href=this.href})},dataLoading:function(a){var b;$("#"+a).hasClass("pop-load")?(b='<div id="dataLoading"><div class="pop-modal"></div><img src="'+hxOptions.basePath+'/images/loading.gif"/></div>',$("#"+a).append(b)):(b='<div id="dataLoading" class="box-space text-center"><img src="'+hxOptions.basePath+'/images/loading.gif"/></div>',$("#"+a).append(b))},dataLoadingClose:function(){$("#dataLoading").remove()},delRow:function(a){$(a).parents("li").remove()},conToggle:function(a){var b=$(a).find(".mui-icon"),c=$(a).parents(".toggle-wrap"),d=$(a).attr("toggle-target"),e=c.find('[toggle-id="'+d+'"]'),f=c.find('[toggle-reverse="true"]');b.hasClass("mui-icon-arrowdown")?(b.removeClass("mui-icon-arrowdown").addClass("mui-icon-arrowup"),e.show(),f.hide()):b.hasClass("mui-icon-arrowup")&&(b.removeClass("mui-icon-arrowup").addClass("mui-icon-arrowdown"),e.hide(),f.show())},pop:{checkboxSubmit:function(a){for(var b=this.elemObj(a),c=[],d=0;d<b.findName.length;d++)b.findName[d].checked&&c.push(b.findName[d].value);b.fillVal.html(c.join(",")),b.fillVal.val(c.join(",")),b.muid.popover("toggle")},radioSubmit:function(a,b){var c=this.elemObj(a);b(c.popname,c.radioChecked),c.muid.popover("toggle")},close:function(a){var b=this.elemObj(a);b.muid.popover("toggle")},checkboxAll:function(a){var b=this.elemObj(a);b.findName.prop("checked",!0)},elemObj:function(a){var b=$(a).parents(".mui-popover").attr("id"),c={popname:b,id:$("#"+b),muid:mui("#"+b),findName:$("#"+b).find("[name="+b+"]"),fillVal:$("#"+b+"Val"),radioChecked:$("#"+b).find("[name="+b+"]:checked")};return c}},listenSwitch:function(a){document.getElementById(a).addEventListener("toggle",function(b){b.detail.isActive?$("#"+a+"Content").show():$("#"+a+"Content").hide()})},pickerDate:function(a){function b(){k=new pickerDateRange("datepicker",{aRecent7Days:"aRecent7DaysID",isTodayValid:!0,needCompare:!1,isSingleDay:!0,shortOpr:!0,inputTrigger:"datepickerTrigger",theme:"ta",success:function(a){l=$("#datepicker").val(),$("#pickerdateVal").html(new d(a.startDate).getMD)}})}function c(a){var b;return 0==a.getDay()&&(b="周日"),1==a.getDay()&&(b="周一"),2==a.getDay()&&(b="周二"),3==a.getDay()&&(b="周三"),4==a.getDay()&&(b="周四"),5==a.getDay()&&(b="周五"),6==a.getDay()&&(b="周六"),b}function d(a){var b=new Date(a),d=c(b);this.getMD=b.getMonth()+1+"-"+b.getDate()+" "+d}function e(a){var b=a.getMonth()+1,c=a.getDate();return b<10&&(b="0"+b),c<10&&(c="0"+c),a.getFullYear()+"-"+b+"-"+c}function f(a){a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)}function g(a){var b=new Date(l);f(h);var c=new Date(b.getFullYear(),b.getMonth(),b.getDate()+a);f(c),c.getTime()<h.getTime()?alert("您不能查看昨日的数据"):(c=e(c),$("#pickerdateVal").html(new d(c).getMD),$("#datepicker,#startDate").val(c),l=$("#datepicker").val(),k.mOpts.realstartVal=l)}var h=new Date,i=e(h),j={defaultDate:i};a=$.extend({},j,a),$("#pickerdateVal").html(new d(a.defaultDate).getMD),$("#datepicker").val(a.defaultDate);var k,l=$("#datepicker").val();b(),k.mOpts.realstartVal=a.defaultDate,$("#lastday").on("click",function(){g(-1),a.lastday({clickDate:$("#datepicker").val()})}),$("#nextday").on("click",function(){g(1),a.nextday({clickDate:$("#datepicker").val()})})},tabPopUp:function(a,b){function c(a){var b=d(a);e=layer.open({type:1,content:$("#"+a).html(),anim:"up",style:"position:fixed; bottom:0; left:0; width: 100%; padding:0; overflow:auto; border:none; height:"+b+"px"})}function d(a){$("#"+a).css("display","block");var b=$("#"+a).outerHeight()-8,c=$(window).height();return b>c&&(b=c),$("#"+a).css("display","none"),b}var e;mui("#"+a+",."+a).on("tap","a",function(){var a=$(this).attr("data-target");c(a),"function"==$.type(b)&&b();var f=function(a){layer.close(e)};huixing.tabPopClose=f,$(window).resize(function(){var b=d(a);$("[index="+e+"]").find(".layermchild").css("height",b)})})},scrollTop:function(){var a='<div class="scrollTop"><div class="scrollbtn" id="scrollbtn" style="display:none"><span class="mui-icon mui-icon-arrowup"></span></div></div>';$("body").append(a),document.querySelector(".mui-scroll-wrapper").addEventListener("scroll",function(a){this.initStartRun||(this.initStartRun=1,window.setInterval("huixing.scrollTopRun()",500))})},scrollTopRun:function(){mui(".mui-scroll-wrapper").scroll().y<-200?($("#scrollbtn").show(),$("#scrollbtn").click(function(){mui(".mui-scroll-wrapper").scroll().scrollTo(0,0,100)})):$("#scrollbtn").hide()}};